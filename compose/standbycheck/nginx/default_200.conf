gzip off;

#Logging Settings
map $time_iso8601 $year {
    default             'year';
    '~^(?<yyyy>\d{4})-'     $yyyy;
}
map $time_iso8601 $month {
    default             'month';
    '~^\d{4}-(?<mm>\d{2})-'     $mm;
}
map $time_iso8601 $day {
    default             'day';
    '~^\d{4}-\d{2}-(?<dd>\d{2})'    $dd;
}
map $time_iso8601 $hour {
    default             'hour';
    '~^\d{4}-\d{2}-\d{2}T(?<hh>\d{2})'    $hh;
}

map $time_iso8601 $formatted_date {
    default                                                                 'date-not-found';
    '~^(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})T(?<hour>\d{2})'         $year$month$day$hour;
}

log_format drivebc '$http_x_forwarded_for - $remote_user [$time_local] '
                    '"$request" $status $body_bytes_sent '
                    '"$http_referer" "$http_user_agent" $upstream_cache_status "$sent_http_content_type" $request_time';

error_log /proc/1/fd/2;
access_log /proc/1/fd/1 drivebc;

server {
    listen       8080;
    listen  [::]:8080;
    server_name  localhost;
    root         /usr/share/nginx/html;
    server_tokens off;

    location / {
        access_log off;
        add_header 'Content-Type' 'text/plain';
    	allow all;
        return 200 "healthy\n";
    }
}